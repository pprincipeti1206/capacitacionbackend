<?xml version="1.0" encoding="UTF-8"?>
<!--
 ! Project home: https://github.com/jaxio/celerio-angular-quickstart
 ! 
 ! Source code generated by Celerio, an Open Source code generator by Jaxio.
 ! Documentation: http://www.jaxio.com/documentation/celerio/
 ! Modificado por CARLOS BAZALAR
 ! Email: cbazalarlarosa@gmail.com
 ! Template pack-angular:src/main/java/mapper/EntityXMLMapper.xml.e.vm
-->

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.incloud.hcp.mapper.HorarioMapper">

<resultMap id="horarioResultMap" type="com.incloud.hcp.domain.Horario">
	<id property="id" jdbcType="INTEGER" column="HORARIO_ID" />
	<result property="fechaInicio" jdbcType="TIMESTAMP" column="FECHA_INICIO" />
	<result property="horaInicio" jdbcType="VARCHAR" column="HORA_INICIO" />	
	<result property="horaFin" jdbcType="VARCHAR" column="HORA_FIN" />	
	<result property="frecuencia" jdbcType="VARCHAR" column="FRECUENCIA" />	
	<result property="modalidad" jdbcType="VARCHAR" column="MODALIDAD" />	
	<result property="curso.id" jdbcType="INTEGER" column="CURSO_ID" />
</resultMap>


<select id="getLista" parameterType="com.incloud.hcp.domain.Horario" resultMap="horarioResultMap">
	SELECT 
      HORARIO_ID , 
      FECHA_INICIO , 
      HORA_INICIO , 
      HORA_FIN , 
      FRECUENCIA , 
      MODALIDAD , 
      CURSO_ID 
	FROM
	HORARIO
	WHERE 1 = 1
	<if test="id != null ">
		AND HORARIO_ID = #{id, jdbcType=INTEGER}
	</if>	
	<if test="fechaInicio != null ">
		AND FECHA_INICIO = #{fechaInicio, jdbcType=DATE}
	</if>
	<if test="horaInicio != null and horaInicio != '' ">
		AND HORA_INICIO = #{horaInicio}
	</if>	
	<if test="horaFin != null and horaFin != '' ">
		AND HORA_FIN = #{horaFin}
	</if>	
	<if test="frecuencia != null and frecuencia != '' ">
		AND FRECUENCIA = #{frecuencia}
	</if>	
	<if test="modalidad != null and modalidad != '' ">
		AND MODALIDAD = #{modalidad}
	</if>	
	<if test="curso != null and curso.id != null">
		AND CURSO_ID = #{curso.id, jdbcType=INTEGER}
	</if>	
</select>

<insert id="insertBean" >
INSERT INTO  HORARIO(
HORARIO_ID , 
FECHA_INICIO , 
HORA_INICIO , 
HORA_FIN , 
FRECUENCIA , 
MODALIDAD , 
CURSO_ID 
)
VALUES
(
#{id} , 
#{fechaInicio} , 
#{horaInicio} , 
#{horaFin} , 
#{frecuencia} , 
#{modalidad} , 
#{curso.id} 
)

</insert>

<insert id="insertMap" parameterType="java.util.Map" >
INSERT INTO  HORARIO(
HORARIO_ID , 
FECHA_INICIO , 
HORA_INICIO , 
HORA_FIN , 
FRECUENCIA , 
MODALIDAD , 
CURSO_ID 
)
(
<foreach collection="list" item="element" index="index" separator=" UNION ">  
SELECT
#{element.id} , 
#{element.fechaInicio} , 
#{element.horaInicio} , 
#{element.horaFin} , 
#{element.frecuencia} , 
#{element.modalidad} , 
#{element.curso.id} 
from dual

</foreach>    
)

</insert>


<update id="updateBean">
    UPDATE HORARIO
    <set>
	<if test="fechaInicio != null ">
		FECHA_INICIO = #{fechaInicio, jdbcType=DATE},
	</if>	
	<if test="horaInicio != null and horaInicio != '' ">
		HORA_INICIO = #{horaInicio},
	</if>	
	<if test="horaFin != null and horaFin != '' ">
		HORA_FIN = #{horaFin},
	</if>	
	<if test="frecuencia != null and frecuencia != '' ">
		FRECUENCIA = #{frecuencia},
	</if>	
	<if test="modalidad != null and modalidad != '' ">
		MODALIDAD = #{modalidad},
	</if>	
	<if test="cursoId != null ">
		CURSO_ID = #{curso.id, jdbcType=INTEGER},
	</if>	
    </set> 
	WHERE 
	  HORARIO_ID = #{id, jdbcType=INTEGER}	
</update>


<delete id="deleteBean">
    DELETE FROM HORARIO
	WHERE 1 = 1
	<if test="id != null ">
		AND HORARIO_ID = #{id, jdbcType=INTEGER}
	</if>	
	<if test="fechaInicio != null ">
		AND FECHA_INICIO = #{fechaInicio, jdbcType=DATE}
	</if>	
	<if test="horaInicio != null and horaInicio != '' ">
		AND HORA_INICIO = #{horaInicio}
	</if>	
	<if test="horaFin != null and horaFin != '' ">
		AND HORA_FIN = #{horaFin}
	</if>	
	<if test="frecuencia != null and frecuencia != '' ">
		AND FRECUENCIA = #{frecuencia}
	</if>	
	<if test="modalidad != null and modalidad != '' ">
		AND MODALIDAD = #{modalidad}
	</if>	
	<if test="curso != null and curso.id != null">
		AND CURSO_ID = #{curso.id}
	</if>	
</delete>

<delete id="deleteAll">
   DELETE FROM HORARIO
</delete>

</mapper>