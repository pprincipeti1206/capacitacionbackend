<?xml version="1.0" encoding="UTF-8"?>
<!--
 ! Project home: https://github.com/jaxio/celerio-angular-quickstart
 ! 
 ! Source code generated by Celerio, an Open Source code generator by Jaxio.
 ! Documentation: http://www.jaxio.com/documentation/celerio/
 ! Modificado por CARLOS BAZALAR
 ! Email: cbazalarlarosa@gmail.com
 ! Template pack-angular:src/main/java/mapper/EntityXMLMapper.xml.e.vm
-->

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.incloud.hcp.mapper.CerNotaPedidoDetalleMapper">

<resultMap id="cerNotaPedidoDetalleResultMap" type="com.incloud.hcp.domain.CerNotaPedidoDetalle">
	<id property="id" jdbcType="INTEGER" column="cer_nota_pedido_detalle_id" />
	<result property="cerNotaPedido.id" jdbcType="INTEGER" column="cer_nota_pedido_id" />
	<result property="posicionSap" jdbcType="VARCHAR" column="posicion_sap" />	
	<result property="mtrBienServicio.id" jdbcType="INTEGER" column="mtr_bien_servicio_id" />
	<result property="mtrCentro.id" jdbcType="INTEGER" column="mtr_centro_id" />
	<result property="mtrAlmacen.id" jdbcType="INTEGER" column="mtr_almacen_id" />
	<result property="precioUnitario" jdbcType="NUMERIC" column="precio_unitario" />
	<result property="cantidadRequerida" jdbcType="NUMERIC" column="cantidad_requerida" />
	<result property="cantidadEntregada" jdbcType="NUMERIC" column="cantidad_entregada" />
	<result property="cerCuentaMayor" jdbcType="VARCHAR" column="cer_cuenta_mayor" />	
	<result property="fechaEntrega" jdbcType="TIMESTAMP" column="fecha_entrega" />
	<result property="idPadre" jdbcType="INTEGER" column="id_padre" />
	<result property="auxiliar" jdbcType="VARCHAR" column="auxiliar" />	
	<result property="mtrCuentaImputacion.id" jdbcType="INTEGER" column="mtr_cuenta_imputacion_id" />
	<result property="ebeln" jdbcType="VARCHAR" column="ebeln" />	
	<result property="extrow" jdbcType="VARCHAR" column="extrow" />	
	<result property="textoItem" jdbcType="VARCHAR" column="texto_item" />	
	<result property="unidadTextoItem" jdbcType="VARCHAR" column="unidad_texto_item" />	
	<result property="mtrCuentaMayor.id" jdbcType="INTEGER" column="mtr_cuenta_mayor_id" />
	<result property="introw" jdbcType="VARCHAR" column="introw" />	
	<result property="mtrUnidadMedida.id" jdbcType="INTEGER" column="mtr_unidad_medida_id" />
	<result property="plazoEntrega" jdbcType="VARCHAR" column="plazo_entrega" />	
	<result property="nuevaFechaEntrega" jdbcType="TIMESTAMP" column="nueva_fecha_entrega" />
</resultMap>


	<select id="findByDetalleSoloPosiciones" parameterType="com.incloud.hcp.domain.CerNotaPedidoDetalle" resultMap="cerNotaPedidoDetalleResultMap">
		SELECT
		cerd.cer_nota_pedido_detalle_id ,
		cerd.cer_nota_pedido_id ,
		cerd.posicion_sap ,
		cerd.mtr_bien_servicio_id ,
		cerd.mtr_centro_id ,
		cerd.mtr_almacen_id ,
		cerd.precio_unitario ,
		cerd.cantidad_requerida ,
		cerd.cantidad_entregada ,
		cerd.cer_cuenta_mayor ,
		cerd.fecha_entrega ,
		cerd.id_padre ,
		cerd.auxiliar ,
		cerd.mtr_cuenta_imputacion_id ,
		cerd.ebeln ,
		cerd.extrow ,
		cerd.texto_item ,
		cerd.unidad_texto_item ,
		cerd.mtr_cuenta_mayor_id ,
		cerd.introw ,
		cerd.mtr_unidad_medida_id ,
		cerd.plazo_entrega ,
		cerd.nueva_fecha_entrega
		FROM
		cer_nota_pedido_detalle cerd
		WHERE cerd.cer_nota_pedido_id = #{cerNotaPedido.id, jdbcType=INTEGER}
		AND cerd.id_padre is null
		ORDER BY cerd.posicion_sap, cerd.extrow
	</select>


	<select id="findByDetalleSubPosicion" parameterType="com.incloud.hcp.domain.CerNotaPedidoDetalle" resultMap="cerNotaPedidoDetalleResultMap">
		SELECT
		cerd.cer_nota_pedido_detalle_id ,
		cerd.cer_nota_pedido_id ,
		cerd.posicion_sap ,
		cerd.mtr_bien_servicio_id ,
		cerd.mtr_centro_id ,
		cerd.mtr_almacen_id ,
		cerd.precio_unitario ,
		cerd.cantidad_requerida ,
		cerd.cantidad_entregada ,
		cerd.cer_cuenta_mayor ,
		cerd.fecha_entrega ,
		cerd.id_padre ,
		cerd.auxiliar ,
		cerd.mtr_cuenta_imputacion_id ,
		cerd.ebeln ,
		cerd.extrow ,
		cerd.texto_item ,
		cerd.unidad_texto_item ,
		cerd.mtr_cuenta_mayor_id ,
		cerd.introw ,
		cerd.mtr_unidad_medida_id ,
		cerd.plazo_entrega ,
		cerd.nueva_fecha_entrega
		FROM
		cer_nota_pedido_detalle cerd
		WHERE cerd.cer_nota_pedido_id = #{cerNotaPedido.id, jdbcType=INTEGER}
		AND cerd.id_padre = #{idPadre, jdbcType=INTEGER}
		ORDER BY cerd.posicion_sap, cerd.extrow
	</select>

<select id="getLista" parameterType="com.incloud.hcp.domain.CerNotaPedidoDetalle" resultMap="cerNotaPedidoDetalleResultMap">
	SELECT 
      cer_nota_pedido_detalle_id , 
      cer_nota_pedido_id , 
      posicion_sap , 
      mtr_bien_servicio_id , 
      mtr_centro_id , 
      mtr_almacen_id , 
      precio_unitario , 
      cantidad_requerida , 
      cantidad_entregada , 
      cer_cuenta_mayor , 
      fecha_entrega , 
      id_padre , 
      auxiliar , 
      mtr_cuenta_imputacion_id , 
      ebeln , 
      extrow , 
      texto_item , 
      unidad_texto_item , 
      mtr_cuenta_mayor_id , 
      introw , 
      mtr_unidad_medida_id , 
      plazo_entrega , 
      nueva_fecha_entrega 
	FROM
	cer_nota_pedido_detalle
	WHERE 1 = 1
	<if test="id != null ">
		AND cer_nota_pedido_detalle_id = #{id, jdbcType=INTEGER}
	</if>	
	<if test="cerNotaPedido != null and cerNotaPedido.id != null">
		AND cer_nota_pedido_id = #{cerNotaPedido.id, jdbcType=INTEGER}
	</if>	
	<if test="posicionSap != null and posicionSap != '' ">
		AND posicion_sap = #{posicionSap}
	</if>	
	<if test="mtrBienServicio != null and mtrBienServicio.id != null">
		AND mtr_bien_servicio_id = #{mtrBienServicio.id, jdbcType=INTEGER}
	</if>	
	<if test="mtrCentro != null and mtrCentro.id != null">
		AND mtr_centro_id = #{mtrCentro.id, jdbcType=INTEGER}
	</if>	
	<if test="mtrAlmacen != null and mtrAlmacen.id != null">
		AND mtr_almacen_id = #{mtrAlmacen.id, jdbcType=INTEGER}
	</if>	
	<if test="precioUnitario != null ">
		AND precio_unitario = #{precioUnitario, jdbcType=NUMERIC}
	</if>	
	<if test="cantidadRequerida != null ">
		AND cantidad_requerida = #{cantidadRequerida, jdbcType=NUMERIC}
	</if>	
	<if test="cantidadEntregada != null ">
		AND cantidad_entregada = #{cantidadEntregada, jdbcType=NUMERIC}
	</if>	
	<if test="cerCuentaMayor != null and cerCuentaMayor != '' ">
		AND cer_cuenta_mayor = #{cerCuentaMayor}
	</if>	
	<if test="fechaEntrega != null ">
		AND fecha_entrega = #{fechaEntrega, jdbcType=DATE}
	</if>
	<if test="idPadre != null ">
		AND id_padre = #{idPadre, jdbcType=INTEGER}
	</if>	
	<if test="auxiliar != null and auxiliar != '' ">
		AND auxiliar = #{auxiliar}
	</if>	
	<if test="mtrCuentaImputacion != null and mtrCuentaImputacion.id != null">
		AND mtr_cuenta_imputacion_id = #{mtrCuentaImputacion.id, jdbcType=INTEGER}
	</if>	
	<if test="ebeln != null and ebeln != '' ">
		AND ebeln = #{ebeln}
	</if>	
	<if test="extrow != null and extrow != '' ">
		AND extrow = #{extrow}
	</if>	
	<if test="textoItem != null and textoItem != '' ">
		AND texto_item = #{textoItem}
	</if>	
	<if test="unidadTextoItem != null and unidadTextoItem != '' ">
		AND unidad_texto_item = #{unidadTextoItem}
	</if>	
	<if test="mtrCuentaMayor != null and mtrCuentaMayor.id != null">
		AND mtr_cuenta_mayor_id = #{mtrCuentaMayor.id, jdbcType=INTEGER}
	</if>	
	<if test="introw != null and introw != '' ">
		AND introw = #{introw}
	</if>	
	<if test="mtrUnidadMedida != null and mtrUnidadMedida.id != null">
		AND mtr_unidad_medida_id = #{mtrUnidadMedida.id, jdbcType=INTEGER}
	</if>	
	<if test="plazoEntrega != null and plazoEntrega != '' ">
		AND plazo_entrega = #{plazoEntrega}
	</if>	
	<if test="nuevaFechaEntrega != null ">
		AND nueva_fecha_entrega = #{nuevaFechaEntrega, jdbcType=DATE}
	</if>
</select>

<insert id="insertBean" >
INSERT INTO  cer_nota_pedido_detalle(
cer_nota_pedido_detalle_id , 
cer_nota_pedido_id , 
posicion_sap , 
mtr_bien_servicio_id , 
mtr_centro_id , 
mtr_almacen_id , 
precio_unitario , 
cantidad_requerida , 
cantidad_entregada , 
cer_cuenta_mayor , 
fecha_entrega , 
id_padre , 
auxiliar , 
mtr_cuenta_imputacion_id , 
ebeln , 
extrow , 
texto_item , 
unidad_texto_item , 
mtr_cuenta_mayor_id , 
introw , 
mtr_unidad_medida_id , 
plazo_entrega , 
nueva_fecha_entrega 
)
VALUES
(
#{id} , 
#{cerNotaPedido.id} , 
#{posicionSap} , 
#{mtrBienServicio.id} , 
#{mtrCentro.id} , 
#{mtrAlmacen.id} , 
#{precioUnitario} , 
#{cantidadRequerida} , 
#{cantidadEntregada} , 
#{cerCuentaMayor} , 
#{fechaEntrega} , 
#{idPadre} , 
#{auxiliar} , 
#{mtrCuentaImputacion.id} , 
#{ebeln} , 
#{extrow} , 
#{textoItem} , 
#{unidadTextoItem} , 
#{mtrCuentaMayor.id} , 
#{introw} , 
#{mtrUnidadMedida.id} , 
#{plazoEntrega} , 
#{nuevaFechaEntrega} 
)

</insert>

<insert id="insertMap" parameterType="java.util.Map" >
INSERT INTO  cer_nota_pedido_detalle(
cer_nota_pedido_detalle_id , 
cer_nota_pedido_id , 
posicion_sap , 
mtr_bien_servicio_id , 
mtr_centro_id , 
mtr_almacen_id , 
precio_unitario , 
cantidad_requerida , 
cantidad_entregada , 
cer_cuenta_mayor , 
fecha_entrega , 
id_padre , 
auxiliar , 
mtr_cuenta_imputacion_id , 
ebeln , 
extrow , 
texto_item , 
unidad_texto_item , 
mtr_cuenta_mayor_id , 
introw , 
mtr_unidad_medida_id , 
plazo_entrega , 
nueva_fecha_entrega 
)
(
<foreach collection="list" item="element" index="index" separator=" UNION ">  
SELECT
#{element.id} , 
#{element.cerNotaPedido.id} , 
#{element.posicionSap} , 
#{element.mtrBienServicio.id} , 
#{element.mtrCentro.id} , 
#{element.mtrAlmacen.id} , 
#{element.precioUnitario} , 
#{element.cantidadRequerida} , 
#{element.cantidadEntregada} , 
#{element.cerCuentaMayor} , 
#{element.fechaEntrega} , 
#{element.idPadre} , 
#{element.auxiliar} , 
#{element.mtrCuentaImputacion.id} , 
#{element.ebeln} , 
#{element.extrow} , 
#{element.textoItem} , 
#{element.unidadTextoItem} , 
#{element.mtrCuentaMayor.id} , 
#{element.introw} , 
#{element.mtrUnidadMedida.id} , 
#{element.plazoEntrega} , 
#{element.nuevaFechaEntrega} 
from dual

</foreach>    
)

</insert>


<update id="updateBean">
    UPDATE cer_nota_pedido_detalle
    <set>
	<if test="cerNotaPedidoId != null ">
		cer_nota_pedido_id = #{cerNotaPedido.id, jdbcType=INTEGER},
	</if>	
	<if test="posicionSap != null and posicionSap != '' ">
		posicion_sap = #{posicionSap},
	</if>	
	<if test="mtrBienServicioId != null ">
		mtr_bien_servicio_id = #{mtrBienServicio.id, jdbcType=INTEGER},
	</if>	
	<if test="mtrCentroId != null ">
		mtr_centro_id = #{mtrCentro.id, jdbcType=INTEGER},
	</if>	
	<if test="mtrAlmacenId != null ">
		mtr_almacen_id = #{mtrAlmacen.id, jdbcType=INTEGER},
	</if>	
	<if test="precioUnitario != null ">
		precio_unitario = #{precioUnitario, jdbcType=NUMERIC},
	</if>	
	<if test="cantidadRequerida != null ">
		cantidad_requerida = #{cantidadRequerida, jdbcType=NUMERIC},
	</if>	
	<if test="cantidadEntregada != null ">
		cantidad_entregada = #{cantidadEntregada, jdbcType=NUMERIC},
	</if>	
	<if test="cerCuentaMayor != null and cerCuentaMayor != '' ">
		cer_cuenta_mayor = #{cerCuentaMayor},
	</if>	
	<if test="fechaEntrega != null ">
		fecha_entrega = #{fechaEntrega, jdbcType=DATE},
	</if>	
	<if test="idPadre != null ">
		id_padre = #{idPadre, jdbcType=INTEGER},
	</if>	
	<if test="auxiliar != null and auxiliar != '' ">
		auxiliar = #{auxiliar},
	</if>	
	<if test="mtrCuentaImputacionId != null ">
		mtr_cuenta_imputacion_id = #{mtrCuentaImputacion.id, jdbcType=INTEGER},
	</if>	
	<if test="ebeln != null and ebeln != '' ">
		ebeln = #{ebeln},
	</if>	
	<if test="extrow != null and extrow != '' ">
		extrow = #{extrow},
	</if>	
	<if test="textoItem != null and textoItem != '' ">
		texto_item = #{textoItem},
	</if>	
	<if test="unidadTextoItem != null and unidadTextoItem != '' ">
		unidad_texto_item = #{unidadTextoItem},
	</if>	
	<if test="mtrCuentaMayorId != null ">
		mtr_cuenta_mayor_id = #{mtrCuentaMayor.id, jdbcType=INTEGER},
	</if>	
	<if test="introw != null and introw != '' ">
		introw = #{introw},
	</if>	
	<if test="mtrUnidadMedidaId != null ">
		mtr_unidad_medida_id = #{mtrUnidadMedida.id, jdbcType=INTEGER},
	</if>	
	<if test="plazoEntrega != null and plazoEntrega != '' ">
		plazo_entrega = #{plazoEntrega},
	</if>	
	<if test="nuevaFechaEntrega != null ">
		nueva_fecha_entrega = #{nuevaFechaEntrega, jdbcType=DATE},
	</if>	
    </set> 
	WHERE 
	  cer_nota_pedido_detalle_id = #{id, jdbcType=INTEGER}	
</update>


<delete id="deleteBean">
    DELETE FROM cer_nota_pedido_detalle
	WHERE 1 = 1
	<if test="id != null ">
		AND cer_nota_pedido_detalle_id = #{id, jdbcType=INTEGER}
	</if>	
	<if test="cerNotaPedido != null and cerNotaPedido.id != null">
		AND cer_nota_pedido_id = #{cerNotaPedido.id}
	</if>	
	<if test="posicionSap != null and posicionSap != '' ">
		AND posicion_sap = #{posicionSap}
	</if>	
	<if test="mtrBienServicio != null and mtrBienServicio.id != null">
		AND mtr_bien_servicio_id = #{mtrBienServicio.id}
	</if>	
	<if test="mtrCentro != null and mtrCentro.id != null">
		AND mtr_centro_id = #{mtrCentro.id}
	</if>	
	<if test="mtrAlmacen != null and mtrAlmacen.id != null">
		AND mtr_almacen_id = #{mtrAlmacen.id}
	</if>	
	<if test="precioUnitario != null ">
		AND precio_unitario = #{precioUnitario, jdbcType=NUMERIC}
	</if>	
	<if test="cantidadRequerida != null ">
		AND cantidad_requerida = #{cantidadRequerida, jdbcType=NUMERIC}
	</if>	
	<if test="cantidadEntregada != null ">
		AND cantidad_entregada = #{cantidadEntregada, jdbcType=NUMERIC}
	</if>	
	<if test="cerCuentaMayor != null and cerCuentaMayor != '' ">
		AND cer_cuenta_mayor = #{cerCuentaMayor}
	</if>	
	<if test="fechaEntrega != null ">
		AND fecha_entrega = #{fechaEntrega, jdbcType=DATE}
	</if>	
	<if test="idPadre != null ">
		AND id_padre = #{idPadre, jdbcType=INTEGER}
	</if>	
	<if test="auxiliar != null and auxiliar != '' ">
		AND auxiliar = #{auxiliar}
	</if>	
	<if test="mtrCuentaImputacion != null and mtrCuentaImputacion.id != null">
		AND mtr_cuenta_imputacion_id = #{mtrCuentaImputacion.id}
	</if>	
	<if test="ebeln != null and ebeln != '' ">
		AND ebeln = #{ebeln}
	</if>	
	<if test="extrow != null and extrow != '' ">
		AND extrow = #{extrow}
	</if>	
	<if test="textoItem != null and textoItem != '' ">
		AND texto_item = #{textoItem}
	</if>	
	<if test="unidadTextoItem != null and unidadTextoItem != '' ">
		AND unidad_texto_item = #{unidadTextoItem}
	</if>	
	<if test="mtrCuentaMayor != null and mtrCuentaMayor.id != null">
		AND mtr_cuenta_mayor_id = #{mtrCuentaMayor.id}
	</if>	
	<if test="introw != null and introw != '' ">
		AND introw = #{introw}
	</if>	
	<if test="mtrUnidadMedida != null and mtrUnidadMedida.id != null">
		AND mtr_unidad_medida_id = #{mtrUnidadMedida.id}
	</if>	
	<if test="plazoEntrega != null and plazoEntrega != '' ">
		AND plazo_entrega = #{plazoEntrega}
	</if>	
	<if test="nuevaFechaEntrega != null ">
		AND nueva_fecha_entrega = #{nuevaFechaEntrega, jdbcType=DATE}
	</if>	
</delete>

<delete id="deleteAll">
   DELETE FROM cer_nota_pedido_detalle
</delete>

</mapper>